#!/bin/zsh

targetDir=`adb shell "su -c 'ls /data/user/0/$1'"`

if [[ $targetDir == "" ]]; then
    echo -e "\e[31m$1 not found\e[m"
    exit 1
fi

adb shell "su -c 'cp -r /data/user/0/$1 /sdcard/'"
adb pull /sdcard/$1 ./
adb shell "su -c 'rm -rf /sdcard/$1'"